<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>

<meta charset="utf-8"/>
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
<meta name="description" content=""/>
<meta name="author" content=""/>

<title>Birdy</title>


<link rel="stylesheet" type="text/css"
	href="/css/bootstrap.min.css" />
<link href="/css/blog-home.css"
	rel="stylesheet" />
<link href="/css/animate.css"
	rel="stylesheet" />
<link href="/css/font-awesome.min.css"
	rel="stylesheet" />

</head>

<body>

	<!-- Navigation -->
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
		<div class="container">
			<a class="navbar-brand" href="#">Birdy</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse"
				data-target="#navbarResponsive" aria-controls="navbarResponsive"
				aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarResponsive">
				<ul class="navbar-nav ml-auto">
					<li class="nav-item"><button class="btn btn-danger"
							onclick="quit();">Quit</button></li>
				</ul>
			</div>
		</div>
	</nav>

	<!-- Page Content -->
	<div class="container">

		<div class="row">

			<!-- Blog Entries Column -->
			<div class="col-md-12" id="container">

				<h1 class="my-4">Login</h1>




				<label for="identifiant">Email:</label> <input type="text" class="form-control" id="id"/> 
				<label for="pwd">Password:</label>
				<input type="password" class="form-control" id="pwd"/>

				<button type="button" class="btn btn-success" onclick="login();">Submit</button>
				<button type="button" class="btn btn-default" onclick="createRegister();">Register</button>


			</div>

		</div>
		<!-- /.row -->

	</div>
	<!-- /.container -->







	<script type="text/javascript"
		src="/js/jquery.min.js"></script>
	<script
		src="/js/popper.min.js"></script>
	<script type="text/javascript"
		src="/js/bootstrap.min.js"></script>

	<script>
		function createRegister(){
			$('#container').empty();
			$('#container').append('<h1 class="my-4">Register</h1>'
					+ '<label for="identifiant">Pseudo:</label>'
					+ '<input type="text" class="form-control" id="pseudo"/>'
					+ '<label for="identifiant">Email:</label>'
					+ '<input type="text" class="form-control" id="id"/>'
					+ '<label for="pwd">Password:</label>'
					+ '<input type="password" class="form-control" id="pwd"/>'
					+ '<button type="button" class="btn btn-default" onclick="register();">Submit</button>'
					);
		}
		
		function register(){
			jQuery.ajax({
				type : 'GET',
				url : 'user',
				data : {
					action : "register",
					pseudo : $('#pseudo').val(),
					email : $('#id').val(),
					password : $('#pwd').val()
				},
				success : function(result) {
					console.log(result);
					location.reload();

				},
				error : function() {
					console.log('oops !');
				}
			});
		}
	
		function login() {
			jQuery.ajax({
				type : 'GET',
				url : 'user',
				data : {
					action : "login",
					email : $('#id').val(),
					password : $('#pwd').val()
				},
				success : function(result) {
					console.log(result);
					location.reload();

				},
				error : function() {
					console.log('oops !');
				}
			});
		}
		
		function quit() {

			jQuery.ajax({
				type : 'GET',
				url : 'api', 
				data : { 
					button : "quit"
				},
				success : function(result) {
					$('body').empty();
				},
				error : function(){
					$('body').empty();
					console.log('oops !');
				}
			});
		}
	</script>

</body>

</html>
